# ATTENTION

# Transition config settings

# ReadConsistency is the consistency of the plot package
# WriteConsistency is the consistency of the collector package

# The keyspace package still uses the cassandraAdmin consistency
# and the udpError package still uses the cassandra consistency
# The idea is to change the cassandra gobol package to accept
# multiple consistencies and abstract that to the applications

# Max number of timeseries allowed to be queried (Solr pagination)
MaxTimeseries = 5000

# Warning number of timeseries
LogQueryTSthreshold = 5000

# Max number of concurrent points being processed
MaxConcurrentPoints = 1000

# Tha max TTL allowed to be specified
MaxAllowedTTL = 730

# Defines the default pagination size used on solr if none was specified
DefaultPaginationSize = 1000

# Mandatory keysets to create on app startup
DefaultKeysets = ["pdeng_stats", "pdeng_collectd", "pdeng_analytics"]

# Maximum size of bytes for each query processing
MaxBytesOnQueryProcessing = 1548576

# Allows these keysets to do queries with more than "MaxBytesOnQueryProcessing" bytes
UnlimitedQueryBytesKeysetWhiteList = ["pdeng_stats"]

# Silences all point validation errors from the logs
SilencePointValidationErrors = true

# Garbage collector initial percentage
GarbageCollectorPercentage = 75

# SHAKE hashing algorithm output size
TSIDKeySize = 16

# All default keyspaces
[DefaultKeyspaces]
  one_day = 1
  three_days = 3
  one_week = 7
  two_weeks = 14
  one_month = 30
  three_months = 90
  six_months = 180
  one_year = 365
  two_years = 730

#The default keyspace data used to create all default keyspaces
[DefaultKeyspaceData]
  Datacenter = "dc_gt_a1"
  ReplicationFactor = 2
  Contact = "l-pd-engenharia@uolinc.com"

[cassandra]
  keyspace = "mycenae"
  consistency = "one"
  nodes = ["a1-labirinto1.host.intranet","a1-labirinto2.host.intranet","a1-labirinto3.host.intranet"]
  username = "cassandra"
  password = "cassandra"
  connections = 3
  discoverHosts = true
  discoverySleep = 10
  retry = 5
  pageSize = 5000
  timeout = "60s"
  protoVersion = 4

[UDPserver]
  port = 4243
  readBuffer = 1048576

[HTTPserver]
  port = 80
  bind = "0.0.0.0"
  EnableProfiling = false
  ForceErrorAsDebug = true
  AllowCORS = false

[GlobalTelnetServerConfiguration]
  # The maximum request time to reach other nodes
  HTTPRequestTimeout = "10s"

  # The size of the connection close channel
  ConnectionCloseChannelSize = 10

  # The maximum telnet connections allowed per node
  MaxTelnetConnections = 50

  # The maximum number of unbalanced telnet connections
  MaxUnbalancedTelnetConnsPerNode = 5

  # the time duration to check if the node is balanced
  TelnetConnsBalanceCheckInterval = "1m"

  # the time duration to wait the unbalanced connection be dropped
  MaxWaitForDropTelnetConnsInterval = "130s"

  # the time duration to wait when a halt request is received for stop the balancing process
  MaxWaitForOtherNodeConnsBalancing = "35s"

  # the available timeseries nodes
  Nodes = ["a1-labirinto4"]

  # silence all info logs
  SilenceLogs = true

[NetdataServer]
  port = 8023
  bind = "loghost"
  onErrorTimeout = "5s"
  sendStatsTimeout = "10s"
  maxIdleConnectionTimeout = "2m"
  maxBufferSize = 204800
  cacheDuration = "1m"
  ServerName = "Netdata Telnet Server"

[TELNETserver]
  port = 8123
  bind = "loghost"
  onErrorTimeout = "5s" 
  sendStatsTimeout = "10s"
  maxIdleConnectionTimeout = "2m"
  maxBufferSize = 204800
  ServerName = "OpenTSDB Telnet Server"

[logs]
  level = "info"
  format = "json"

[stats]
  address = "10.128.7.26"
  port = 80
  protocol = "http"
  httptimeout = "10s"
  httppostinterval = "1m"
  interval = "@every 1m"
  runtime = true
  [stats.tags]
    service = "mycenae"
    ttl = "14"
    ksid = "pdeng_dev_env"

[statsAnalytic]
  address = "loghost"
  port = 80
  protocol = "http"
  httptimeout = "10s"
  httppostinterval = "10m"
  interval = "@every 10m"
  runtime = false
  [statsAnalytic.tags]
        service = "mycenae"
        ttl = "365"
        ksid = "pdeng_analytics"

[metadataSettings]
  numShards = 2
  replicationFactor = 2
  url = "http://a1-kandango-q-pla1.host.intranet:8983/solr"
  IDCacheTTL = 60
  QueryCacheTTL = 60
  KeysetCacheTTL = 60
  MaxReturnedMetadata = 10000
  ZookeeperConfig = "mycenae"
  BlacklistedKeysets = ["chimera", "blacklist", "inventory"]
  CacheKeyHashSize = 16

[memcached]
  # the nodes
  Nodes = ["10.133.128.8:11211","10.133.128.102:11211","10.133.128.103:11211","10.133.128.105:11211","10.133.128.106:11211"]
  
  # the number of idle connections per host
  NumConnectionsPerNode = 5
  
  # the time duration between connection retries
  ReconnectionTimeout = "1s"
  
  # the max time duration to wait a read or write operation
  ReadWriteTimeout = "3s"
  
  # the maximum number of write retries
  MaxWriteRetries = 3

  # the size of the read buffer in bytes
  ReadBufferSize = 2048

[validation]
  maxTextValueSize = 10000
  maxNumTags       = 20
  propertyRegexp   = "^[0-9A-Za-z-\\._\\%\\&\\#\\;\\/]+$"
  keysetNameRegexp = "^[a-z_]{1}[a-z0-9_\\-]+[a-z0-9]{1}$"
  defaultTTL       = 1
  MaxPropertySize  = 64
